export default {
  "attributes": {
    "id": "71e8347e-9bdb-4d81-a323-203be472f0ad",
    "timestamp": 1376169022000,
    "title": "RSS a Sitemap jednoduše a rychle",
    "slug": "rss-a-sitemap-jednoduse-a-rychle"
  },
  "body": "Pár článků zpět jsem ukazoval několik příkladů, jak tvořit různé routy. Ukazoval jsem routy pro RSS i sitemap.xml. Nikde jsem však zatím neukazoval jak je to jednoduše realizovatelné. Dokonce tak jednoduše, že je škoda tyto soubory nevyužít na jakémkoliv webu, protože mají poměrně velký potenciál.\n\nZačněme HomepagePresenterem (DEV Nette):\n\n```php\n<?php\n\nclass HomepagePresenter extends BasePresenter {\n\n\t/** @var \\Model\\Posts @inject */\n\tpublic $posts;\n\n\tpublic function renderRss() {\n\t\t$this->template->posts = $this->posts->getAllPosts()->order('date DESC')->limit(50);\n\t}\n\n\tpublic function renderSitemap() {\n\t\t$this->template->sitemap = $this->posts->getAllPosts();\n\t}\n\n}\n```\n\nTímto říkám, že do šablon <code>rss.latte</code> a <code>sitemap.latte</code> předávám všechny články, nebo jen některé, protože nechci dělat dump celé databáze pro RSS.\n\nPro úplnost ještě \\Model\\Posts:\n\n```php\n<?php\n\nnamespace Model;\n\nclass Posts extends \\Nette\\Object {\n\n\t/** @var \\Nette\\Database\\SelectionFactory @inject */\n\tpublic $sf;\n\n\t/**\n\t * @return Nette\\Database\\Table\\Selection\n\t */\n\tpublic function getAllPosts() {\n\t\treturn $this->sf->table('posts');\n\t}\n\n}\n```\n\nA následují samotné šablony, které musí dodržovat určitý formát, takže se lehce odlišují od normálních šablon. Sitemap.latte:\n\n```html\n{contentType application/xml}\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n\n<urlset xmlns=\"http://www.sitemaps.org/schemas/sitemap/0.9\">\n\t{foreach $sitemap as $s}\n\t\t<url>\n\t\t\t<loc>{link //Single:article $s->id}</loc>\n\t\t</url>\n\t{/foreach}\n</urlset>\n```\n\nRss.latte:\n\n```html\n{contentType application/xml}\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n\n<rss version=\"2.0\">\n\t<channel>\n\t\t<title>Martin Zlámal [BLOG]</title>\n\t\t<link>{link //:Homepage:default}</link>\n\t\t<description>Nejnovější články na blogu.</description>\n\t\t<language>cs</language>\n\n\t\t<item n:foreach=\"$posts as $post\">\n\t\t\t<title>{$post->title}</title>\n\t\t\t<link>{link //:Single:article $post->id}</link>\n\t\t\t<description>{$post->body|texy|striptags}</description>\n\t\t</item>\n\t</channel>\n</rss>\n```\n\nA pro úplnou úplnost i router:\n\n```php\n<?php\n\nnamespace App;\nuse Nette;\nuse Nette\\Application\\Routers\\Route;\nuse Nette\\Application\\Routers\\RouteList;\nuse Nette\\Application\\Routers\\SimpleRouter;\n\nclass RouterFactory {\n\n\t/**\n\t * @return \\Nette\\Application\\IRouter\n\t */\n\tpublic function createRouter() {\n\t\t$router = new RouteList();\n\t\t$router[] = new Route('sitemap.xml', 'Homepage:sitemap');\n\t\t// na RSS se dá odkazovat normálně bez routeru, nebo:\n\t\t$router[] = new Route('rss.xml', 'Homepage:rss');\n\t\t//...\n\t\t$router[] = new Route('<presenter>/<action>[/<id>]', 'Homepage:default');\n\t\treturn $router;\n\t}\n\n}\n```\n\nJednoduché a na pár řádek. Jen vědět jak na to... (-:"
}
